<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Driver App - Daftar Order</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap" rel="stylesheet">
    <style>
        /* ... (CSS sebelumnya tetap sama) ... */
        
        .map-container iframe {
            filter: grayscale(100%) invert(90%) contrast(90%) hue-rotate(180deg);
            border: none;
        }
    </style>
</head>
<body>
    <!-- ... (HTML sebelumnya tetap sama) ... -->

    <script>
        // ... (Script sebelumnya tetap sama sampai fungsi openBottomSheet) ...
        
        function openBottomSheet(order) {
            document.getElementById('sheetPhoto').src = order.photo_url || 'https://via.placeholder.com/50';
            document.getElementById('sheetName').textContent = order.userName;
            document.getElementById('sheetFrom').textContent = order.from;
            document.getElementById('sheetTo').textContent = order.to;
            document.getElementById('sheetPhone').textContent = order.phone;
            document.getElementById('sheetDistance').textContent = order.distance;
            document.getElementById('sheetDuration').textContent = order.duration;
            document.getElementById('sheetPrice').textContent = order.totalPrice;
            
            // Load Google Maps dengan parameter yang valid dan tampilan minimal
            const fromLatLng = order.from_latlng.split(',');
            const toLatLng = order.to_latlng.split(',');
            
            let mapUrl = `https://www.google.com/maps/embed/v1/directions?key=${mapKey}`;
            mapUrl += `&origin=${currentPosition ? currentPosition.lat + ',' + currentPosition.lng : fromLatLng[0] + ',' + fromLatLng[1]}`;
            mapUrl += `&destination=${toLatLng[0]},${toLatLng[1]}`;
            mapUrl += `&waypoints=${fromLatLng[0]},${fromLatLng[1]}`;
            mapUrl += '&mode=driving';
            mapUrl += '&zoom=14';
            mapUrl += '&maptype=roadmap';
            mapUrl += '&language=id';
            mapUrl += '&region=ID';
            
            // Menghilangkan semua UI yang tidak diperlukan
            const iframeHtml = `
                <iframe 
                    width="100%" 
                    height="100%" 
                    frameborder="0" 
                    style="border:0" 
                    src="${mapUrl}"
                    allowfullscreen
                    loading="lazy"
                    referrerpolicy="no-referrer-when-downgrade"
                ></iframe>
            `;
            
            mapContainer.innerHTML = iframeHtml;
            
            bottomSheet.classList.add('active');
            
            // Tambahan untuk memastikan UI Google Maps benar-benar bersih
            setTimeout(() => {
                const iframe = mapContainer.querySelector('iframe');
                if (iframe) {
                    iframe.style.pointerEvents = 'none';
                }
            }, 1000);
        }
        
        // ... (Script setelahnya tetap sama) ...
    </script>
</body>
</html>
